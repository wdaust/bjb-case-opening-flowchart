@import "tailwindcss";

/* ── shadcn zinc palette ─────────────────────────────────── */

:root {
  --background: 0 0% 100%;
  --foreground: 240 10% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 240 10% 3.9%;
  --primary: 240 5.9% 10%;
  --primary-foreground: 0 0% 98%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 240 4.8% 95.9%;
  --accent-foreground: 240 5.9% 10%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 5.9% 90%;
  --input: 240 5.9% 90%;
  --ring: 240 5.9% 10%;
  --sidebar-background: 0 0% 98%;
  --sidebar-foreground: 240 5.3% 26.1%;
  --sidebar-primary: 240 5.9% 10%;
  --sidebar-primary-foreground: 0 0% 98%;
  --sidebar-accent: 240 4.8% 95.9%;
  --sidebar-accent-foreground: 240 5.9% 10%;
  --sidebar-border: 220 13% 91%;
  --sidebar-ring: 217.2 91.2% 59.8%;

  /* custom app vars — zinc-aligned */
  --table-stripe: 0 0% 97.6%;
  --shadow: 0 0% 0% / 0.1;
  --tooltip-bg: 240 10% 3.9%;
  --tooltip-color: 0 0% 100%;
  --hint-bg: 0 0% 100% / 0.85;
  --subgraph-bg: 0 0% 96% / 0.5;
  --subgraph-border: 240 2% 62%;
  --subgraph-label: 240 5% 26%;
}

.dark {
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --card: 240 10% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 240 5.9% 10%;
  --secondary: 240 3.7% 15.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --accent: 240 3.7% 15.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 15.9%;
  --ring: 240 4.9% 83.9%;
  --sidebar-background: 240 5.9% 10%;
  --sidebar-foreground: 240 4.8% 95.9%;
  --sidebar-primary: 224.3 76.3% 48%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 240 3.7% 15.9%;
  --sidebar-accent-foreground: 240 4.8% 95.9%;
  --sidebar-border: 240 3.7% 15.9%;
  --sidebar-ring: 217.2 91.2% 59.8%;

  --table-stripe: 240 6% 6%;
  --shadow: 0 0% 0% / 0.3;
  --tooltip-bg: 0 0% 88%;
  --tooltip-color: 240 10% 3.9%;
  --hint-bg: 240 10% 4% / 0.9;
  --subgraph-bg: 0 0% 100% / 0.06;
  --subgraph-border: 240 2% 34%;
  --subgraph-label: 0 0% 80%;
}

/* ── Register as Tailwind theme colors (HSL) ─────────────── */

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-sidebar-background: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  --color-table-stripe: hsl(var(--table-stripe));
  --color-shadow: hsl(var(--shadow));
  --color-tooltip-bg: hsl(var(--tooltip-bg));
  --color-tooltip-color: hsl(var(--tooltip-color));
  --color-hint-bg: hsl(var(--hint-bg));
  --color-subgraph-bg: hsl(var(--subgraph-bg));
  --color-subgraph-border: hsl(var(--subgraph-border));
  --color-subgraph-label: hsl(var(--subgraph-label));
}

/* ── Base styles ──────────────────────────────────────────── */

* {
  box-sizing: border-box;
}

body {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  margin: 0;
  padding: 0;
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  transition: background 0.3s, color 0.3s;
}

/* ── Spinner animation ────────────────────────────────────── */

@keyframes spin {
  to { transform: rotate(360deg); }
}

.spinner {
  width: 20px;
  height: 20px;
  border: 3px solid hsl(var(--border));
  border-top-color: hsl(var(--primary));
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

/* ── Phase tags ───────────────────────────────────────────── */

.phase-tag {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 600;
  color: #fff;
  white-space: nowrap;
}
.phase-setup { background: #1565c0; }
.phase-auto { background: #2e7d32; }
.phase-doc { background: #e65100; }
.phase-review { background: #6a1b9a; }
.phase-complaint { background: #c62828; }
.phase-service { background: #00838f; }
.phase-followup { background: #f9a825; color: #1a1a1a; }
.phase-subpoena { background: #4e342e; }
.phase-default { background: #37474f; }
.phase-supportive { background: #ad1457; }
.phase-call { background: #1565c0; }
.phase-letter { background: #2e7d32; }
.phase-intake { background: #6a1b9a; }
.phase-appt { background: #c62828; }
.phase-audit { background: #00838f; }
.phase-admin { background: #37474f; }
.phase-amend { background: #e65100; }
.phase-discovery { background: #b71c1c; }
.phase-depo { background: #4a148c; }
.phase-expert { background: #00695c; }
.phase-mgmt { background: #ff6f00; color: #1a1a1a; }
.phase-milestone { background: #ff6f00; color: #1a1a1a; }

/* ── React Flow overrides ─────────────────────────────────── */

.react-flow__node {
  cursor: pointer;
}
.react-flow__minimap {
  border-radius: 8px;
}

/* Dark mode React Flow overrides */
.dark .react-flow__background {
  background: hsl(var(--card));
}
.dark .react-flow__controls button {
  background: hsl(var(--secondary));
  border-color: hsl(var(--border));
  fill: hsl(var(--foreground));
}
.dark .react-flow__controls button:hover {
  background: hsl(var(--muted));
}
.dark .react-flow__minimap {
  background: hsl(var(--card));
}
.dark .react-flow__edge path {
  stroke: #666;
}

/* ── Sidebar mobile overlay ───────────────────────────────── */

.sidebar-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  z-index: 40;
}
